#-----------------------------------------------------------------------        
#
# FILE NAME     : Makefile
#
# TYPE          : Makefile
#
# PURPOSE       : Makes the shared library libweb_source.a
#
# REVISION INFO : 
#
# $Revision: 1$
# $Date: 21/09/2006 10:58:10$
# $Source: /home/us0400/mdb/op/lib/web_source/RCS/Makefile,v $
#
# CHANGE RECORD :
#
# $Log:
#  1    Met_DB_Project 1.0         21/09/2006 10:58:10    Stan Kellett    
# $
# Revision 2.3  2002/02/05 09:25:46  usmdb
# Now f90 compiles - S.Cox
#
# Revision 2.2  2001/12/10 16:24:18  usmdb
# added chmod 755 - S.Cox
#
# Revision 2.1  2001/11/16 16:01:11  usmdb
# Now makes a shared library - S.Cox
#
# Revision 2.0  2001/11/08 16:31:50  usmdb
# Various small changes - S.Cox
#
# Revision 1.3  2000/09/06 14:08:06  usmdb
# Added webbuoyp and webform2 - S.Cox
#
# Revision 1.2  2000/08/07  15:14:51  15:14:51  usmdb (Generic MDB account)
# Added webgexp - S.Cox
# 
# Revision 1.1  2000/08/07  15:11:48  15:11:48  usmdb (Generic MDB account)
# Initial revision
#
#-----------------------------------------------------------------------        
# (C) CROWN COPYRIGHT 2001 - MET OFFICE. All Rights Reserved.
#
# Met Office, United Kingdom
#
# The use, duplication and disclosure of this code is strictly
# prohibited without the permission of The Meteorological Database 
# Team at the above address.
#-----------------------------------------------------------------------        

#-----------------------------------------------------------------------        
# turn off default suffix rules:
#-----------------------------------------------------------------------        

.SUFFIXES:

#-----------------------------------------------------------------------        
# Tell the compiler that .o's are dependent on .c's and .F's
#-----------------------------------------------------------------------        

.SUFFIXES: .F .o

#-----------------------------------------------------------------------        
# Define the compiler parameters for HP f90 compiler
#-----------------------------------------------------------------------        
# -K (implicit SAVE), -g (debug information), -C (range checking),
# +z (needed to construct shared library)
#-----------------------------------------------------------------------        

FF		= ifc
FFLAGS		= -nus -w -g -C

#-----------------------------------------------------------------------        
# Define the compiler parameters for NAG f95 compiler
#-----------------------------------------------------------------------        
# -save (implicit SAVE), -g (debug information), -C (range checking)
# -Wc,+z (needed to construct shared library)
#-----------------------------------------------------------------------        

#FF		= f95
#FFLAGS		= -save -g -C -Wc,+z

#-----------------------------------------------------------------------        
# User-added macros
# (Add any other macros which are to be set through 'mkmf')
#-----------------------------------------------------------------------        

BASE_DIR	= ${PWD:/lib/web_source=}

#TARGET		= libweb_source

MAKEFILE	= Makefile_linux

INCL_DIR 	= /home/us0400/mdb_new/op/include

IFLAGS		= -I ${INCL_DIR}
           
INCLUDE_FILES	= ${INCL_DIR}

SRCS		= webret.F \
		  webdis.F \
		  websamos.F \
		  webesaw.F \
		  webtfmet.F \
		  webtadv.F \
		  webncm.F \
		  webair.F \
		  webform.F \
		  webshp.F \
		  webtbus.F \
		  webssea.F \
		  weblnd.F \
		  websrew.F \
		  webgexp.F \
		  webupr.F \
		  webbuoyp.F \
		  webform2.F

OBJS		= webret.o \
		  webdis.o \
		  websamos.o \
		  webesaw.o \
		  webtfmet.o \
		  webtadv.o \
		  webncm.o \
		  webair.o \
		  webform.o \
		  webshp.o \
		  webtbus.o \
		  webssea.o \
		  weblnd.o \
		  websrew.o \
		  webgexp.o \
		  webupr.o \
		  webbuoyp.o \
		  webform2.o

#-----------------------------------------------------------------------        
# Build shared library
#-----------------------------------------------------------------------        

TARGET_LIB	= libweb_source.a

$(TARGET_LIB):	${OBJS} $(INCLUDE_FILES) 
		rm -f $@
		ar rv $@ ${OBJS}
		chmod 755 $@

#-----------------------------------------------------------------------        
# rule describes how to make a '.o' from a '.F'
#-----------------------------------------------------------------------        

.F.o:
	$(FF) $(FFLAGS) -c $< 

#-----------------------------------------------------------------------        
# Objects are dependent on the include files and the makefile
#-----------------------------------------------------------------------        

$(OBJS):        $(MAKEFILE) 

clean:;		@rm -f $(OBJS) core .Static.salf Static.sadb $(PTREPOSITORY)/*.o BLINK/* *_bld.stamp
