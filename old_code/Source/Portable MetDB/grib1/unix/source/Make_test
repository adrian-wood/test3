#########################################################################
#
# FILE NAME      : Make_Linux_ifc
#
# TYPE           : Makefile
#
# PURPOSE        : used to test things 
#                  
#
#########################################################################

.SUFFIXES:
.SUFFIXES: .F .o
.SUFFIXES: .f .o

FFLAGS       =  -DHP
FCFLAGS      =  -CB -c
FC           = ifc
LIBDIR       = /usr/local/lib
BINDIR       = /usr/local/bin


# Name of library
LIB = libgrib_Linux_ifc.a

# Fortran source including pre-processor statements, *.F
FSRCS        = analyse.F \
               coder.F \
 	       decode.F \
	       gbyte.F \
	       gbytes.F \
	       grib_edtn_1_dec.F \
	       grib_edtn_1_enc.F \
	       limited_extract.F \
	       sbyte.F \
	       sbytes.F
# Fortran source not containing pre-processor statements, *.f
fSRCES       = ceil_log2.f \
	       prtbk1.f \
	       prtbk2.f \
	       confp.f \
	       decfp.f \
	       find_mesgs.f \
	       findbox.f \
	       intarr_max.f \
	       intarr_min.f \
	       level_desc_dec.f \
	       level_desc_enc.f \
	       level_desc_table.f \
	       offset.f \
	       orig_centre_check.f \
	       parameter_check.f \
	       prbkn2.f \
	       prtbin.f \
	       range_check.f \
	       realarr_max.f \
	       realarr_min.f \
	       time_range_dec.f \
	       time_range_enc.f \
	       time_range_table.f \
	       time_unit_check.f

# define files for LIB objects
LIBOBJ       = analyse.o \
	       decode.o \
	       prtbk1.o \
	       prtbk2.o \
	       coder.o \
	       gbyte.o \
	       gbytes.o \
	       grib_edtn_1_dec.o \
	       grib_edtn_1_enc.o \
	       limited_extract.o \
	       sbyte.o \
	       sbytes.o \
	       ceil_log2.o \
               confp.o \
	       decfp.o \
	       find_mesgs.o \
	       findbox.o \
	       intarr_max.o \
	       intarr_min.o \
	       level_desc_dec.o \
	       level_desc_enc.o \
	       level_desc_table.o \
	       offset.o \
	       orig_centre_check.o \
	       parameter_check.o \
	       prbkn2.o \
	       prtbin.o \
	       range_check.o \
	       realarr_max.o \
	       realarr_min.o \
	       time_range_dec.o \
	       time_range_enc.o \
	       time_range_table.o \
	       time_unit_check.o \
	       getbstream.o \
	       find_grib.o \
	       zpdate.f90

$(LIB): ${LIBOBJ}
	rm -f $@
	ar rv $@ ${LIBOBJ} 
# f90 source code not pre-processed
getbstream.o: getbstream.f90
	ifc $(FCFLAGS) -o $@ getbstream.f90
find_grib.o: find_grib.f90
	ifc $(FCFLAGS) -o $@ find_grib.f90
zpdate.o: zpdate.f90
	ifc $(FCFLAGS) -o $@ zpdate.f90

# f77 code not pre-processed
prtbk1.o: prtbk1.f
	$(FC) $(FCFLAGS) -o $@ prtbk1.f
prtbk2.o: prtbk2.f
	$(FC) $(FCFLAGS) -o $@ prtbk2.f
ceil_log2.o: ceil_log2.f
	$(FC) $(FCFLAGS) -o $@ ceil_log2.f
confp.o: confp.f
	$(FC) $(FCFLAGS) -o $@ confp.f
decfp.o: decfp.f
	$(FC) $(FCFLAGS) -o $@ decfp.f
find_mesgs.o: find_mesgs.f
	$(FC) $(FCFLAGS) -o $@ find_mesgs.f
findbox.o: findbox.f
	$(FC) $(FCFLAGS) -o $@ findbox.f
intarr_max.o: intarr_max.f
	$(FC) $(FCFLAGS) -o $@ intarr_max.f
intarr_max.o: intarr_min.f
	$(FC) $(FCFLAGS) -o $@ intarr_min.f
level_desc_dec.o: level_desc_dec.f
	$(FC) $(FCFLAGS) -o $@ level_desc_dec.f
level_desc_enc.o: level_desc_enc.f
	$(FC) $(FCFLAGS) -o $@ level_desc_enc.f
level_desc_table.o: level_desc_table.f
	$(FC) $(FCFLAGS) -o $@ level_desc_table.f
offset.o: offset.f
	$(FC) $(FCFLAGS) -o $@ offset.f
orig_centre_check.o: orig_centre_check.f
	$(FC) $(FCFLAGS) -o $@ orig_centre_check.f
parameter_check.o: parameter_check.f
	$(FC) $(FCFLAGS) -o $@ parameter_check.f
prbkn2.o: prbkn2.f
	$(FC) $(FCFLAGS) -o $@ prbkn2.f
prtbin.o: prtbin.f
	$(FC) $(FCFLAGS) -o $@ prtbin.f
range_check.o: range_check.f
	$(FC) $(FCFLAGS) -o $@ range_check.f
realarr_max.o: realarr_max.f
	$(FC) $(FCFLAGS) -o $@ realarr_max.f
realarr_min.o: realarr_min.f
	$(FC) $(FCFLAGS) -o $@ realarr_min.f
time_range_dec.o: time_range_dec.f
	$(FC) $(FCFLAGS) -o $@ time_range_dec.f
time_range_enc.o: time_range_enc.f
	$(FC) $(FCFLAGS) -o $@ time_range_enc.f
time_range_table.o: time_range_table.f
	$(FC) $(FCFLAGS) -o $@ time_range_table.f
time_unit_check.o: time_unit_check.f
	$(FC) $(FCFLAGS) -o $@ time_unit_check.f

decode.o: decode.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ decode.F
analyse.o: analyse.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ analyse.F
coder.o: coder.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ coder.F
gbyte.o: gbyte.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ gbyte.F
gbytes.o: gbytes.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ gbytes.F
grib_edtn_1_dec.o: grib_edtn_1_dec.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ gbyte.F
grib_edtn_1_enc.o: grib_edtn_1_enc.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ grib_edtn_1_enc.F
limited_extract.o: limited_extract.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ limited_extract.F
sbyte.o: sbyte.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ sbyte.F
sbytes.o: sbytes.F
	$(FC) $(FFLAGS) $(FCFLAGS) -o $@ sbytes.F
	
clean:
	rm *.o *.a
