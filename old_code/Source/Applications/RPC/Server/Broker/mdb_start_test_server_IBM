/* REXX -------------------------------------------------------------*
 *
 * Program      : mdb_start_test_server (IBM version)                                       
 *
 *              : NOTE: Revision name = mdb_start_test_server_IBM, but
 *              :       routine must be renamed to mdb_start_test_server
 *              :       for usage.
 *
 * Language     : REXX
 *
 * Description  : Routine to start the MetDB server on ukmet 
 *
 * Note         : Always exit code 0 as the command executes in the 
 *              : background. If the server has not started properly, 
 *              : the situation will be trapped in the 
 *              : mdb_check_server exec.
 *
 * Called by    : mdb_rpc_broker
 *
 * Arguments    : prognum  (ip) : RPC main server program number
 *
 * Changes      :
 *
 * 02-02-1998   : Based on routine written by Martyn Catlow. - S.Cox
 *
 * $Log:
 *  2    Met_DB_Project 1.1         06/10/2009 11:35:53    Sheila Needham
 *       z/os1.08 backup before change to z/os 1.10
 *  1    Met_DB_Project 1.0         11/10/2006 11:35:25    Kudsia Gwangwaa 
 * $
 * Revision 1.3  2001/01/09  13:46:15  13:46:15  usmdb (Generic MDB account)
 * Slight changes to print statements and header - S.Cox
 * 
 * Revision 1.2  98/02/03  13:59:16  13:59:16  usmdb (Generic MDB account)
 * Add REXX in 1st comment line, otherwise it
 * will not work.
 * 
 * Revision 1.1  1998/02/03 09:59:43  usmdb
 * Initial revision
 *
 * $Source: /home/us0400/mdb/op/lib/RPC/server/broker/RCS/mdb_start_test_server_IBM,v $
 *-------------------------------------------------------------------*/

parse arg prognum

datim = DATE('O') TIME('N')
say  datim 'mdb_start_server: submitting 'prognum             /* 1.3 */

dsn = "'MDB.REXX.EXEC(MSRPCTST)' "||"'"prognum"'"
cmd = '"EX 'dsn'"'

/*-------------------------------------------------------------------*
 * The OE shell command "tsocmd" invokes a TSO/E REXX exec which
 * runs the mdb server startup exec MDBSERV.  The command runs as a
 * forked process in the background so control returns to the caller
 * immediately.
 *-------------------------------------------------------------------*/

address SH "/bin/tsocmd "cmd||" &"

datim = DATE('O') TIME('N')                                   /* 1.3 */
say  datim 'mdb_start_server: 'prognum' submitted'            /* 1.3 */

exit 0
