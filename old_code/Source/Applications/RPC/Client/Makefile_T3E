#-----------------------------------------------------------------------
# 
# Make file to build MetDB RPC library MetDBRPC.a on the T3E.
#
# Users can use this library to make an RPC client executable to
# call the MDB remotely:
#
# e.g. f90 -o client.exe lndsyn.f MetDBRPC.a
#
# $Revision: 1$
# $Date: 11/10/2006 11:27:16$
# $Source: /home/us0400/mdb/op/lib/RPC/client/RCS/Makefile_T3E,v $
#
# $Log:
#  1    Met_DB_Project 1.0         11/10/2006 11:27:16    Kudsia Gwangwaa 
# $
# Revision 1.4  2003/03/14 12:23:17  usmdb
# Removed _T3E and added CFLAGS - S.Cox
#
# Revision 1.3  2001/03/29 09:00:32  usmdb
# Removed MAKEFILE dependancies - S.Cox
#
# Revision 1.2  2000/06/16  11:32:44  11:32:44  usmdb (Generic MDB account)
# Addition of routine timtxt - S.Cox
# 
# Revision 1.1  99/03/15  11:11:35  11:11:35  usmdb (Generic MDB account)
# Initial revision
#
#-----------------------------------------------------------------------
# (C) CROWN COPYRIGHT 2003 - MET OFFICE. All Rights Reserved.
#
# Met Office, United Kingdom
#
# The use, duplication and disclosure of this code is strictly
# prohibited without the permission of The Meteorological Database 
# Team at the above address.
#-----------------------------------------------------------------------

# turn off default suffix rules:
# Tell the compiler that .o's are dependent on .c's

.SUFFIXES:
.SUFFIXES: .c .o

CC          = cc 

CFLAGS	    = -DT3E

LIBRARY     = MetDBRPC.a

HDRS        = constants.h \
	      msrpc_call_broker.h \
	      msrpc_call_freepn.h \
	      msrpc_call_mdb.h \
   	      ssrpc_call_mdb.h

SRCS	    = RPC_errors.c \
	      mdb_rpc_main.c \
       	      msrpc_call_broker.c \
	      msrpc_call_broker_clnt.c \
	      msrpc_call_broker_xdr.c \
	      msrpc_call_freepn.c \
	      msrpc_call_freepn_clnt.c \
	      msrpc_call_freepn_xdr.c \
	      msrpc_call_mdb_HP.c \
	      msrpc_call_mdb_clnt.c \
	      msrpc_call_mdb_xdr.c \
	      ssrpc_call_mdb.c \
	      ssrpc_call_mdb_clnt.c \
	      ssrpc_call_mdb_xdr.c \
	      timtxt.c

OBJS	    = RPC_errors.o \
	      mdb_rpc_main.o \
	      msrpc_call_broker.o \
	      msrpc_call_broker_clnt.o \
	      msrpc_call_broker_xdr.o \
	      msrpc_call_freepn.o \
	      msrpc_call_freepn_clnt.o \
	      msrpc_call_freepn_xdr.o \
	      msrpc_call_mdb.o \
	      msrpc_call_mdb_clnt.o \
	      msrpc_call_mdb_xdr.o \
	      ssrpc_call_mdb.o \
	      ssrpc_call_mdb_clnt.o \
	      ssrpc_call_mdb_xdr.o \
	      timtxt.o

$(LIBRARY):	${OBJS}
		rm -f $@
		ar rv $@ ${OBJS}

.c.o:
	$(CC) $(CFLAGS) -c $<

clean:;		@rm -f $(OBJS) core
