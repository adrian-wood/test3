#-----------------------------------------------------------------------
# 
# Make file to build MetDB RPC library MetDBRPC.a on a Linux system.
#
# Users can use this library to make an RPC client executable to
# call the MDB remotely:
#
# e.g. ifc -o client.exe lndsyn.f MetDBRPC.a
#
# $Revision: 3$
# $Date: 21/09/2011 11:00:26$
# $Source: /home/us0400/mdb/op/lib/RPC/client/RCS/Makefile_Linux,v $
#
# $Log:
#  3    Met_DB_Project 1.2         21/09/2011 11:00:26    Sheila Needham
#       Changed default output file name
#  2    Met_DB_Project 1.1         21/09/2011 10:49:45    Sheila Needham  Turn
#       warnings off
#  1    Met_DB_Project 1.0         09/11/2009 10:44:12    Sheila Needham
#       Initial check-in of revised client software (previously under client
#       directory)
# $
# Revision 1.1  2003/07/10 09:37:11  usmdb
# Initial revision
#
#-----------------------------------------------------------------------
# (C) CROWN COPYRIGHT 2003 - MET OFFICE. All Rights Reserved.
#
# Met Office, United Kingdom
#
# The use, duplication and disclosure of this code is strictly
# prohibited without the permission of The Meteorological Database 
# Team at the above address.
#-----------------------------------------------------------------------

# turn off default suffix rules:
# Tell the compiler that .o's are dependent on .c's

.SUFFIXES:
.SUFFIXES: .c .o

CC          = gcc 

CFLAGS	    = -DUNDERSCORE -w

LIBRARY     = MetDBRPC3.a

HDRS        = constants.h \
	      msrpc_call_broker.h \
	      msrpc_call_freepn.h \
	      msrpc_call_mdb.h \

SRCS	    = RPC_errors.c \
	      mdb_rpc_main.c \
       	      msrpc_call_broker.c \
	      msrpc_call_broker_clnt.c \
	      msrpc_call_broker_xdr.c \
	      msrpc_call_freepn.c \
	      msrpc_call_freepn_clnt.c \
	      msrpc_call_freepn_xdr.c \
	      msrpc_call_mdb.c \
	      msrpc_call_mdb_clnt.c \
	      msrpc_call_mdb_xdr.c \
	      timtxt.c

OBJS	    = RPC_errors.o \
	      mdb_rpc_main.o \
	      msrpc_call_broker.o \
	      msrpc_call_broker_clnt.o \
	      msrpc_call_broker_xdr.o \
	      msrpc_call_freepn.o \
	      msrpc_call_freepn_clnt.o \
	      msrpc_call_freepn_xdr.o \
	      msrpc_call_mdb.o \
	      msrpc_call_mdb_clnt.o \
	      msrpc_call_mdb_xdr.o \
	      timtxt.o

$(LIBRARY):	${OBJS}
		rm -f $@
		ar rv $@ ${OBJS}

.c.o:
	$(CC) $(CFLAGS) -c $<

clean:;		@rm -f $(OBJS) core
